import{j as a,d as _,e as p,_ as m,f as w,b as F,g as S,r as h,S as T,L}from"./index-35v143-v.js";import{F as x,b,d as f,E as j,c as E,a as k,T as A}from"./index.esm-BOzCTtj1.js";function v({profile:r}){var d,u,g;const{avatar_url:t="",fields:i}=r,{email:c,["first name"]:n="",["last name"]:l=""}=i,e=((d=c[0])==null?void 0:d.value)??"",s=((u=n[0])==null?void 0:u.value)??"",o=((g=l[0])==null?void 0:g.value)??"";return a.jsxs("div",{className:"mb-4 flex rounded-lg bg-[#3b3c3d] p-4",children:[a.jsx("div",{className:"mr-5 block h-[88px] min-w-[88px] overflow-hidden rounded-full",children:a.jsx("img",{src:t,alt:"Contact`s avatar",width:88,height:88,className:"h-[88px] w-[88px] object-cover"})}),a.jsxs("div",{className:"flex flex-col gap-5",children:[s===""&&o===""?a.jsx("p",{children:"No any name"}):a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("p",{children:s}),a.jsx("p",{children:o})]}),e?a.jsx("a",{href:`mailto:${e}`,target:"_blank",rel:"noopener noreferrer nofollow","aria-label":"Link to contact`s email",children:a.jsx("b",{children:e})}):a.jsx("b",{children:"No email"})]})]})}v.propTypes;function y({id:r,current:t}){const[i]=_(),{refetch:c}=p(r),n=[];t.length>0&&t.map(e=>n.push(e.tag));const l={tags:""};return a.jsx(x,{initialValues:l,onSubmit:async(e,s)=>{const o=e.tags.split(/[ ,.:;"'`]+/).filter(Boolean),d={contactId:r,tags:[...n,...o]};try{await i(d).unwrap(),s.resetForm(),c(),m.success("Your tags added successfull!")}catch(u){console.error(u.data.human_readable_error),m.error(`Oops...! Failed to create tags: ${u.data.human_readable_error}`)}finally{s.setSubmitting(!1)}},children:a.jsxs(b,{children:[a.jsxs("label",{htmlFor:"tags",children:[a.jsx(f,{id:"tags",type:"text",name:"tags",placeholder:"Enter contact`s tags"}),a.jsx(j,{name:"tags",component:"strong"})]}),a.jsx("button",{type:"submit",className:"button",children:"Add tags"})]})})}y.propTypes;const I=E().shape({imageUrl:k().url("Invalid URL format").matches(/\.(jpeg|jpg|gif|png|bmp|svg|webp|tiff)$/,"URL must be a valid image format (jpeg, jpg, gif, png, bmp, svg, webp, tiff)")});function N({current:r}){const{id:t,fields:i}=r,[c]=w(),{refetch:n}=p(r.id),l={avatar:""};return a.jsx(x,{initialValues:l,validationSchema:I,onSubmit:async(e,s)=>{const o={contactId:t,avatar_url:e.avatar,is_important:!0,...i};try{await c(o).unwrap(),s.resetForm(),n(),m.success("Your avatar is added successfull!")}catch(d){console.error(d.data.human_readable_error),m.error(`Oops! It's an error: ${d.data.human_readable_error}`)}finally{s.setSubmitting(!1)}},children:a.jsxs(b,{children:[a.jsxs("label",{htmlFor:"avatar",children:[a.jsx(f,{id:"avatar",type:"text",name:"avatar",placeholder:"Enter your image URL"}),a.jsx(j,{name:"avatar",component:"strong"})]}),a.jsx("button",{type:"submit",className:"button",children:"Add avatar"})]})})}N.propTypes;function $(){var o;const r=F(),{contactId:t}=S(),i=h.useRef(((o=r.state)==null?void 0:o.from)??"/"),{data:c,error:n,isLoading:l}=p(t),e=c?c.resources[0]:{},s=(e==null?void 0:e.tags)??[];return h.useEffect(()=>(m.success("You`ve got it! :)"),()=>m.dismiss()),[]),a.jsx("section",{children:a.jsxs("div",{className:"container",children:[a.jsx("h1",{className:"title",children:"Contact`s profile"}),n?a.jsx(a.Fragment,{children:n.message}):l?a.jsx(T,{}):a.jsx(v,{profile:e}),s.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"subtitle",children:"Tags"}),a.jsx("div",{className:"mb-4 rounded-lg bg-[#3b3c3d] p-4",children:a.jsx(A,{id:t,tags:s})})]}),a.jsx(y,{id:t,current:s}),a.jsx(N,{contactId:t,current:e}),a.jsx(L,{to:i.current.pathname,children:a.jsx("span",{className:"mb-8 inline-block rounded-lg border-[2px] border-solid border-[#3b3c3d] px-3 py-1 text-center transition hover:bg-[#3b3c3d] focus:bg-[#3b3c3d]",children:"GO BACK"})})]})})}export{$ as default};
