import{j as a,d as N,e as x,_ as m,f as _,b as F,g as S,r as g,S as T,L}from"./index-BOZ2PRhp.js";import{F as h,b,d as f,E as j,c as k,a as E,T as A}from"./index.esm-DPedu7p7.js";function v({profile:r}){var d,u,p;const{avatar_url:s="",fields:l}=r,{email:c,["first name"]:n="",["last name"]:i=""}=l,e=((d=c[0])==null?void 0:d.value)??"",t=((u=n[0])==null?void 0:u.value)??"",o=((p=i[0])==null?void 0:p.value)??"";return a.jsxs("div",{className:"mb-4 flex rounded-lg bg-[#3b3c3d] p-4 xl:mx-auto xl:w-[880px]",children:[a.jsx("div",{className:"mr-5 block h-[122px] min-w-[122px] overflow-hidden rounded-full",children:a.jsx("img",{src:s,alt:"Contact`s avatar",width:122,height:122,className:"h-[122px] w-[122px] object-cover"})}),a.jsxs("div",{className:"flex flex-col gap-5 tracking-wider xl:text-lg xl:font-semibold",children:[t===""&&o===""?a.jsx("p",{children:"No any name"}):a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsx("p",{children:t}),a.jsx("p",{children:o})]}),e?a.jsx("a",{href:`mailto:${e}`,target:"_blank",rel:"noopener noreferrer nofollow","aria-label":"Link to contact`s email",children:a.jsx("b",{children:e})}):a.jsx("b",{children:"No email"})]})]})}v.propTypes;function y({id:r,current:s}){const[l]=N(),{refetch:c}=x(r),n=[];s.length>0&&s.map(e=>n.push(e.tag));const i={tags:""};return a.jsx(h,{initialValues:i,onSubmit:async(e,t)=>{const o=e.tags.split(/[ ,.:;"'`]+/).filter(Boolean),d={contactId:r,tags:[...n,...o]};try{await l(d).unwrap(),t.resetForm(),c(),m.success("Your tags added successfull!")}catch(u){console.error(u.data.human_readable_error),m.error(`Oops...! Failed to create tags: ${u.data.human_readable_error}`)}finally{t.setSubmitting(!1)}},children:a.jsxs(b,{children:[a.jsxs("label",{htmlFor:"tags",children:[a.jsx(f,{id:"tags",type:"text",name:"tags",placeholder:"Enter contact`s tags"}),a.jsx(j,{name:"tags",component:"strong"})]}),a.jsx("button",{type:"submit",className:"button",children:"Add tags"})]})})}y.propTypes;const I=k().shape({imageUrl:E().url("Invalid URL format").matches(/\.(jpeg|jpg|gif|png|bmp|svg|webp|tiff)$/,"URL must be a valid image format (jpeg, jpg, gif, png, bmp, svg, webp, tiff)")});function w({profile:r}){const{id:s,fields:l}=r,[c]=_(),{refetch:n}=x(r.id),i={avatar:""};return a.jsx(h,{initialValues:i,validationSchema:I,onSubmit:async(e,t)=>{const o={contactId:s,avatar_url:e.avatar,is_important:!0,...l};try{await c(o).unwrap(),t.resetForm(),n(),m.success("Your avatar is added successfull!")}catch(d){console.error(d.data.human_readable_error),m.error(`Oops! It's an error: ${d.data.human_readable_error}`)}finally{t.setSubmitting(!1)}},children:a.jsxs(b,{children:[a.jsxs("label",{htmlFor:"avatar",children:[a.jsx(f,{id:"avatar",type:"text",name:"avatar",placeholder:"Enter your image URL"}),a.jsx(j,{name:"avatar",component:"strong"})]}),a.jsx("button",{type:"submit",className:"button",children:"Add avatar"})]})})}w.propTypes;function $(){var o;const r=F(),{contactId:s}=S(),l=g.useRef(((o=r.state)==null?void 0:o.from)??"/"),{data:c,error:n,isLoading:i}=x(s),e=c?c.resources[0]:{},t=(e==null?void 0:e.tags)??[];return g.useEffect(()=>(m.success("You`ve got it! :)"),()=>m.dismiss()),[]),a.jsx("section",{children:a.jsxs("div",{className:"container",children:[a.jsx("h1",{className:"title",children:"Contact`s profile"}),n?a.jsx(a.Fragment,{children:n.message}):i?a.jsx(T,{}):a.jsx(v,{profile:e}),t.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"subtitle",children:"Tags"}),a.jsx("div",{className:"mb-4 rounded-lg bg-[#3b3c3d] p-4 xl:mx-auto xl:w-[880px]",children:a.jsx(A,{id:s,tags:t})})]}),a.jsx(y,{id:s,current:t}),a.jsx(w,{contactId:s,profile:e}),a.jsx(L,{to:l.current.pathname,children:a.jsx("span",{className:"mb-8 inline-block rounded-lg border-[2px] border-solid border-[#3b3c3d] px-3 py-1 text-center transition hover:bg-[#3b3c3d] focus:bg-[#3b3c3d]",children:"GO BACK"})})]})})}export{$ as default};
