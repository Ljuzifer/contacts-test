import{j as s,d as f,e as h,_ as u,b as j,f as v,r as g,a as N,S as y,L as F}from"./index-BB9ApNo2.js";import{F as T,a as C,b as E,E as _,T as k}from"./formik.esm-CjAmaQSI.js";function p({profile:o}){var c,m,x;const{avatar_url:a="",fields:i}=o,{email:l,["first name"]:r="",["last name"]:d=""}=i,t=((c=l[0])==null?void 0:c.value)??"",e=((m=r[0])==null?void 0:m.value)??"",n=((x=d[0])==null?void 0:x.value)??"";return s.jsxs("div",{className:"mb-4 flex rounded-lg bg-[#3b3c3d] p-4 hover:bg-[#1d1d1d]",children:[s.jsx("div",{className:"mr-5 block h-[88px] min-w-[88px] overflow-hidden rounded-full",children:s.jsx("img",{src:a,alt:"Contact`s avatar",width:88,height:88,content:"object-cover"})}),s.jsxs("div",{className:"flex flex-col gap-5",children:[e===""&&n===""?s.jsx("p",{children:"No any name"}):s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("p",{children:e}),s.jsx("p",{children:n})]}),t?s.jsx("b",{children:t}):s.jsx("b",{children:"No email"})]})]})}p.propTypes;function b({id:o,current:a}){const[i]=f(),{refetch:l}=h(o),r=[];a.length>0&&a.map(t=>r.push(t.tag));const d={tags:""};return s.jsx(T,{initialValues:d,onSubmit:async(t,e)=>{const n=t.tags.split(/[- ,.:;"'`]+/).filter(Boolean),c={contactId:o,tags:[...r,...n]};try{await i(c).unwrap(),e.resetForm(),l(),u.success("Your tags added successfull!")}catch(m){console.error(m.data.human_readable_error),u.error(`Oops...! Failed to create tags: ${m.data.human_readable_error}`)}finally{e.setSubmitting(!1)}},children:s.jsxs(C,{children:[s.jsxs("label",{htmlFor:"tags",children:[s.jsx(E,{id:"tags",type:"text",name:"tags",placeholder:"Enter contact`s tags"}),s.jsx(_,{name:"tags",component:"strong"})]}),s.jsx("button",{type:"submit",className:"button",children:"Add tags"})]})})}b.propTypes;function S(){var c;const o=j(),{contactId:a}=v(),i=g.useRef(((c=o.state)==null?void 0:c.from)??"/"),{data:l,error:r,isLoading:d}=h(a),{refetch:t}=N(),e=l?l.resources[0]:{},n=(e==null?void 0:e.tags)??[];return g.useEffect(()=>(u.success("You`ve got it! :)"),()=>u.dismiss()),[]),s.jsx("section",{children:s.jsxs("div",{className:"container",children:[s.jsx("h1",{className:"title",children:"Contact`s profile"}),r?s.jsx(s.Fragment,{children:r.message}):d?s.jsx(y,{}):s.jsx(p,{profile:e}),s.jsx("h2",{className:"subtitle",children:"Tags"}),s.jsx("div",{className:"mb-4 rounded-lg bg-[#3b3c3d] p-4",children:s.jsx(k,{id:a,tags:n})}),s.jsx(b,{id:a,current:n}),s.jsx(F,{to:i.current.pathname,onClick:()=>t(),children:s.jsx("span",{className:"mb-8 inline-block rounded-lg border-[2px] border-solid border-[#3b3c3d] px-3 py-1 text-center transition hover:bg-[#3b3c3d] focus:bg-[#3b3c3d]",children:"GO BACK"})})]})})}export{S as default};
